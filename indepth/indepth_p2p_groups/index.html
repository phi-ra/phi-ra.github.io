<!DOCTYPE html>
<html>

  <head>
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  Philipp  Ratz


  | Further research

</title>
<meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design.
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->

<link rel="icon" href="/phi_logo.ico">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="/indepth/indepth_p2p_groups/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>






    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="https://phi-ra.github.io/">
       <span class="font-weight-bold">Philipp</span>   Ratz
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          <!-- CV -->
          <li class="nav-item ">
            <a class="nav-link" href="/assets/pdf/current_cv.pdf">
              CV
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item ">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/research/">
                research
                
              </a>
          </li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/teaching/">
                teaching
                
              </a>
          </li>
          
          
          
          
          
          
          
            <div class="toggle-container">
              <a id="light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      <div class="post">

  <header class="post-header">
    <h1 class="post-title">Further research</h1>
    <p class="post-description">Work on higher orders and subgroups</p>
  </header>

  <article>
    <p>The last part in this series tries to work on some of the drawbacks that might occure in the simple mechanism that we developed in <a href="/indepth/indepth_p2p_simulation/">the post on simulation</a>. Some of it (“the friends-of-friends”) part can already be found in our <a href="https://arxiv.org/abs/2107.02764" target="_blank" rel="noopener noreferrer">Article</a> but the work on subgroups goes slightly beyond that.</p>

<h2 id="higher-order-connections">Higher order connections</h2>

<p>We saw in the previous post, that some agents cannot share their whole deductible, as they cannot find “friends” (aka first order connections) that are willing to enter a contract with them or not enough to fill up their desire. This will happen more often if the network becomes more concentrated (which happens in higher-variance cases).</p>

<p>A possibility to overcome this issue is to look further than ones friends. For example, one could try to share some of the residual risk with the friends of his friends. This simply corresponds to the second order connections, that were not already connected to a specific node. Or in set notation:</p>

<p>Given a network \((\mathcal{E},\mathcal{V})\), with degrees \(\boldsymbol{d}\) and some first-level optimization vector \(\boldsymbol{\gamma}_1\), define the subset of vertices who could not share their whole deductible as,</p>

\[\mathcal{V}_{\boldsymbol{\gamma}_1} = \big\lbrace i \in \mathcal{V}: \gamma_i=\sum_{j\in\mathcal{V}}\gamma_{(i,j)} &lt; s \big\rbrace.\]

<p>The \(\boldsymbol{\gamma}_1\)-sub-network of friends of friends is \((\mathcal{E}_{\boldsymbol{\gamma}_1}^{(2)},\mathcal{V}_{\boldsymbol{\gamma}_1})\),</p>

\[\mathcal{E}_{\boldsymbol{\gamma}_1}^{(2)} = \big\lbrace(i,j)\in\mathcal{V}_{\boldsymbol{\gamma}_1}\times\mathcal{V}_{\boldsymbol{\gamma}_1}:\exists k\in\mathcal{V}\text{ such that }(i,k)\in\mathcal{E},~(k,j)\in\mathcal{E}\text{ and }i\neq j\big\rbrace\]

<p>Now we can assume that everyone would trust the friends of his friends slightly less (or assume they have a slightly different risk profile), so naturally one would share less of the risk with them. In our example we assume that each node wants to share up to \(25\) with a friend but only \(5\) with the friend of a friend. We can see the results below.</p>

<p><img src="/assets/img/graph_6_2.png" alt="drawing" width="400" class="center"></p>

<p>Looks like an improvement already. But under the hood something interesting is going on, best visualized as follows:</p>

<p><img src="/assets/img/self_gamma_2_25.png" alt="drawing" width="400" class="center"></p>

<p>The centralization due to the higher degree variance actually generates “hubs” - really popular agents that help every connected node to have more “friends-of-friends”.</p>

<h2 id="sparsification-of-the-contracts">Sparsification of the contracts</h2>

<p>In the case of optimal reciprocal engagements, some contributions can be close to zero but not exactly zero, as even a minimal engagement will increase the global optimization problem. In this case it might be beneficial to “shrink” these contributions to effectively zero, especially if those reciprocal contracts have some management fixed costs, without decreasing \(\boldsymbol{\gamma}^*\) too much. This can be achieved by reformulating the linear programming problem into a mixed-integer optimization.</p>

\[\begin{cases}
\boldsymbol{z}^\star =\displaystyle{\underset{\boldsymbol{z}\in\mathbb{R}_+^m}{\text{argmax}}\left\lbrace\boldsymbol{1}^\top\boldsymbol{z}\right\rbrace}\\
\text{s.t. }\boldsymbol{T}^\top\boldsymbol{z}\leq s\boldsymbol{1}_m\\
~~~~z_i \leq My_i,~\forall i\\
~~~~\displaystyle{\sum_{i}y_i\leq m}
\end{cases}\]

<p>where \(y_i \in \{0,1\}\) and \(m\) maximum desired non-zero engagements. \(M\) is an upper bound on each \(z_i \in \boldsymbol{z}\) which comes naturally as we look for reciprocal engagements smaller than the specified \(\gamma\). This mechanism will effectively shrink small contributions to zero.</p>

<p>The figure below depicts the trade-off. This mechanism becomes more important for the friends-of-friends problems, where networks with a high degree standard deviation result in second degree adjacency matrices with extremely large \(\lvert\mathcal{E}\rvert\). Intuitively, this allows the global planner to introduce a trade-off between having a large total coverage but a restricted number of contracts.</p>

<p><img src="/assets/img/sparse_solution.png" alt="drawing" width="400" class="center"></p>

<p>Depicted here is the percentage of the sum of deductibles being shared with different number of non-zero edges. Whereas there is a close to linear trade-off in the middle ground, where a one less edge results in \(-\gamma\) on the total sum, the function plateaus on the right hand side, resulting in a sparser solution with almost the same percentage shared.</p>

<h2 id="subgroup-sharing">Subgroup sharing</h2>

<p>Throughout our article, we argued that our assumption of i.i.d. risks is somewhat justified due to <a href="https://en.wikipedia.org/wiki/Homophily" target="_blank" rel="noopener noreferrer">homophily</a> which is often encountered in real networks. After all - if people are similar in many aspects of life, they should also be similar in the aspects that make up risk itself.</p>

<p>But even then in those cases there might be some correlation among sub-parts of the network. Imagine an appartement block being on fire - there will be some correlation of the risk, or consider theft insurance which will be correlated based on spatial patterns. An attractive option would be to consider cliques, but we already saw in the <a href="/indepth/indepth_p2p_math/">post on risk sharing principles</a> that even finding an optimal clique cover is NP-complete. An alternative to finding a clique cover is to find more densly connected subgroups (in the literature often called clustering).</p>

<p>For that we will simulate data based on the <a href="https://en.wikipedia.org/wiki/Lancichinetti%E2%80%93Fortunato%E2%80%93Radicchi_benchmark" target="_blank" rel="noopener noreferrer">lfr-benchmark</a>, as our networks that we generated before do (by construction) not contain an inherit subgraph structure. We then cluster the graph (here using a modularity based approach) and assign to each true subgroup (not the ones retreived by the clustering) a different claim probability and analyse how much risk was shared within the homogenous communities.</p>

<p><img src="/assets/img/clustered_subgraphs.png" alt="drawing" width="400" class="center"></p>

<p>Here we see a smaller clustered subgraph after coloring the clusters with the estimated results.</p>

<p><img src="/assets/img/heterogen_plot.png" alt="drawing" width="400" class="center"></p>

<p>The evaluation in such a setting becomes more challenging, even if we only consider numerical details, there are many nuts and bolts that can be changed (and indeed, will be different in every real world scenario). Here we illustrate how much of the risk is shared within each subgroup. This of course depends on the variance of the Bernoulli parameters <em>across</em> the subgroups and the structure of the networks. In theory, if too much risk is shared with a more risky subgroup, agents have an incentive to deviate, but this should only occur <em>after</em> an initial period. This in turn goes well beyond the scope of our article, but analysing multiperiod dynamics is a natural next step on our endeavour to understand P2P insurance products from a mathematical perspective.</p>


  </article>

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    © Copyright 2023 Philipp  Ratz.
    Based on <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>.

    
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
